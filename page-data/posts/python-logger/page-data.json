{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/python-logger","result":{"data":{"markdownRemark":{"id":"cb0b5fcf-4f99-5af9-bac1-fe3a3ca559df","html":"<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> logging<span class=\"token punctuation\">.</span>handlers\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">custom_log</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">dir</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        BASE_DIR <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>dirname<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>dirname<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>abspath<span class=\"token punctuation\">(</span>__file__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        UPLOAD_DIR <span class=\"token operator\">=</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>BASE_DIR<span class=\"token punctuation\">}</span></span><span class=\"token string\">/log/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">dir</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">/'</span></span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span>UPLOAD_DIR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            os<span class=\"token punctuation\">.</span>makedirs<span class=\"token punctuation\">(</span>UPLOAD_DIR<span class=\"token punctuation\">,</span> exist_ok<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n        filename <span class=\"token operator\">=</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>UPLOAD_DIR<span class=\"token punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">dir</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">_'</span></span>\n\n        <span class=\"token comment\"># logger 설정</span>\n        logger <span class=\"token operator\">=</span> logging<span class=\"token punctuation\">.</span>getLogger<span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n        logger<span class=\"token punctuation\">.</span>setLevel<span class=\"token punctuation\">(</span>logging<span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 포맷 설정</span>\n        formatter <span class=\"token operator\">=</span> logging<span class=\"token punctuation\">.</span>Formatter<span class=\"token punctuation\">(</span><span class=\"token string\">'%(asctime)s [%(levelname)s] %(message)s'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 2023-05-22 13:25:47 [INFO] message</span>\n        formatter<span class=\"token punctuation\">.</span>datefmt <span class=\"token operator\">=</span> <span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span>\n\n        <span class=\"token comment\"># 핸들러 설정(오전 12시에 저장됨)</span>\n        handler <span class=\"token operator\">=</span> logging<span class=\"token punctuation\">.</span>handlers<span class=\"token punctuation\">.</span>TimedRotatingFileHandler<span class=\"token punctuation\">(</span>filename<span class=\"token operator\">=</span>filename<span class=\"token punctuation\">,</span>\n                                                            when<span class=\"token operator\">=</span><span class=\"token string\">'midnight'</span><span class=\"token punctuation\">,</span>\n                                                            interval<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                                                            encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n        handler<span class=\"token punctuation\">.</span>setFormatter<span class=\"token punctuation\">(</span>formatter<span class=\"token punctuation\">)</span>\n        handler<span class=\"token punctuation\">.</span>suffix <span class=\"token operator\">=</span> <span class=\"token string\">'%Y-%m-%d.log'</span>\n\n        <span class=\"token comment\"># logger instance에 handler 설정</span>\n        logger<span class=\"token punctuation\">.</span>addHandler<span class=\"token punctuation\">(</span>handler<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> logger\n    <span class=\"token keyword\">except</span> Exception <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'Exception : </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>e<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"/posts/2024//posts/python-logger","tagSlugs":["/tag/python/","/tag/logger/"]},"frontmatter":{"date":"2024-01-23","description":"python logger","tags":["python","logger"],"title":"파이썬 로그 남기기","socialImage":null}}},"pageContext":{"slug":"/posts/2024//posts/python-logger"}},"staticQueryHashes":["251939775","2764776372","401334301"]}